<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jason Collins">
<meta name="dcterms.date" content="2022-01-06">

<title>Best books I read in 2021 – Jason Collins blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ac706bccb5107cfdbcdabb2cff0da72d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C50MEPDMZ9"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C50MEPDMZ9', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Best books I read in 2021 – Jason Collins blog">
<meta property="og:description" content="Behavioural economics, data science and artificial intelligence.">
<meta property="og:site_name" content="Jason Collins blog">
<meta name="twitter:title" content="Best books I read in 2021 – Jason Collins blog">
<meta name="twitter:description" content="Behavioural economics, data science and artificial intelligence.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Jason Collins blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../subscribe.html"> 
<span class="menu-text">Subscribe</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Best books I read in 2021</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jason Collins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 6, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>The best books I <em>read</em> in 2021 - generally released in other years - were:</p>
<ul>
<li>David Badre, <em>On Task: How Our Brain Gets Things Done</em>: Effectively spans from the latest neuroscience to practical applications. The presentation of some computational models of our brains was great. I think about them a lot.</li>
<li>Hugo Mercier and Dan Sperber, <em>The Enigma of Reason: A New Theory of Human Understanding</em>: I’m not sold on the overarching thesis, but I love the way they pull apart many different theories and approaches in psychology. I have a bunch of draft posts in the pipeline about some of the topics covered in the book.</li>
<li>Norton Juster, <em>The Phantom Tollbooth</em>: The kids loved it (ages 7, 7 and 5) and so did I.</li>
</ul>
<p>It’s a short list. There just wasn’t much I was inspired by this year. Maybe I’m getting old and grumpy. Perhaps my book selection was not great. What I pick up next is too often dictated by mood rather than a plan.</p>
<p>Below is the full list of books that I read in 2021 (starred if I have read before). The volume of my reading of books cover-to-cover continues to fall year-on-year, with 33 total (23 non-fiction, 10 fiction). The pandemic and continued lack of commute is one driver beyond the decline. You can see from the list of the books I have read to the kids (48 of them!) where some of that extra time at home is going.</p>
<p>I’ve also included a list of books commenced but abandoned. There are 9 on that list. I want to be more ruthless in stopping reading books that aren’t worth the effort. There are more than enough on the reading pile to justify moving on if the gain isn’t there. As you can see from that short, albeit incomplete list, abandoning books is a skill I need to build.</p>
<p><em>Non-Fiction</em></p>
<ul>
<li>Ajay Agrawal, Joshua Gans and Avi Goldfarb, <em>Prediction Machines: The Simple Economics of Artificial Intelligence</em></li>
<li>David Badre, <em>On Task: How Our Brain Gets Things Done</em></li>
<li>Kaushik Basu, <em>The Republic of Beliefs</em></li>
<li>Clayton Christensen, <em>The Innovator’s Dilemma</em></li>
<li>Ryan Holiday, <em>The Obstacle Is The Way</em></li>
<li>Maria Konnikova, <em>The Biggest Bluff: How I Learned to Pay Attention, Take Control and Master the Odds</em></li>
<li>Charles C Mann, <em>1491: The Americas Before Columbus</em></li>
<li>Antonio Garcia Martinez, <em>Chaos Monkeys: Inside the Silicon Valley Money Machine</em></li>
<li>Gary Marcus and Jeremy Freeman (eds), <em>The Future of the Brain</em></li>
<li>Hugo Mercier and Dan Sperber, <em>The Enigma of Reason: A New Theory of Human Understanding</em></li>
<li>Siddhartha Mukherjee, <em>The Gene: An Intimate History</em> (<a href="https://www.spectator.co.uk/article/principles-of-heredity">Stuart Ritchie’s review</a> captures some of my headline thoughts)</li>
<li>Cal Newport, <em>A World Without Email</em></li>
<li>C. Northcote Parkinson, <em>Parkinson’s Law or The Pursuit of Progress</em></li>
<li>Thomas Piketty, <em>Capital and Ideology</em></li>
<li>Eric Schlosser, <em>Command and Control: Nuclear Weapons, the Damascus Accident, and the Illusion of Safety</em></li>
<li>James C Scott, <em>Seeing Like a State</em></li>
<li>Janelle Shane, <em>You Look Like a Thing and I Love You</em></li>
<li>Edward Snowden, <em>Permanent Record</em></li>
<li>Rory Sutherland, <em>Alchemy: The Surprising Power of Ideas That Don’t Make Sense</em></li>
<li>Nassim Nicholas Taleb, <em>Fooled by Randomness</em>*</li>
<li>Max Tegmark, <em>Life 3.0: Being Human in the Age of Artificial Intelligence</em></li>
<li>Gillian Tett, <em>Anthro-Vision: How Anthropology Can Explain Business and Life</em></li>
<li>Fred Waitzkin, <em>Searching for Bobby Fisher</em></li>
</ul>
<p><em>Fiction</em></p>
<ul>
<li>Christopher Buckley, <em>Thank You for Smoking</em>*</li>
<li>Fyodor Dostoyevsky, <em>Notes from the Underground</em></li>
<li>Alexandre Dumas, <em>The Three Musketeers</em></li>
<li>Elizabeth Gaskell, <em>North and South</em></li>
<li>Nathaniel Hawthorne, <em>The House of the Seven Gables</em></li>
<li>Cixin Liu, <em>The Three-Body Problem</em></li>
<li>Jack London, <em>White Fang</em></li>
<li>Cormac McCarthy, <em>The Road</em>*</li>
<li>Herman Melville, <em>The Piazza Tales</em></li>
<li>H.G. Wells, <em>The Invisible Man</em>*</li>
</ul>
<p><em>Commenced but abandoned (incomplete list)</em></p>
<ul>
<li>Karen Armstrong, <em>A History of God</em></li>
<li>Isaac Asimov, <em>I Asimov: A Memoir</em></li>
<li>Jeff Bezos, <em>Invent &amp; Wander: The Collected Writings of Jeff Bezos</em></li>
<li>György Buzsáki, <em>The Brain from Inside Out</em></li>
<li>Andy Clark, <em>Surfing Uncertainty: Prediction, Action and the Embodied Mind</em> (I tried this twice, once in 2020 and again in 2021.)</li>
<li>George RR Martin, <em>A Game of Thrones</em></li>
<li>Nathaniel Hawthorne, <em>The Scarlet Letter</em></li>
<li>Will Page, <em>Tarzan Economics</em></li>
<li>Jimmy Soni and Rob Goodman, <em>A Mind at Play: How Claude Shannon Invented the Information Age</em></li>
</ul>
<p><em>Read to the kids</em></p>
<ul>
<li>Carlo Collodi, <em>Pinocchio</em></li>
<li>Frances Hodgson Burnett, <em>The Secret Garden</em>*</li>
<li>Roald Dahl, <em>Charlie and the Chocolate Factory</em></li>
<li>Roald Dahl, <em>Fantastic Mr Fox</em></li>
<li>Roald Dahl, <em>Matilda</em></li>
<li>Kenneth Grahame, <em>Wind in the Willows</em>*</li>
<li>Norton Juster, <em>The Phantom Tollbooth</em></li>
<li>Rupyard Kipling, <em>The Jungle Book</em></li>
<li>Roger Lancelyn Green, <em>The Adventures of Robin Hood</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 13-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 26-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 39-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 52-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 65-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 78-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 91-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 104-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 117-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 130-Storey Treehouse</em>*</li>
<li>Andy Griffiths and Terry Denton, <em>The 143-Storey Treehouse</em></li>
<li>Emily Rodda, <em>The Maze of the Beast</em></li>
<li>Emily Rodda, <em>The Valley of the Lost</em></li>
<li>Emily Rodda, <em>Return to Del</em></li>
<li>Emily Rodda, <em>Cavern of the Fear</em></li>
<li>Emily Rodda, <em>The Isle of Illusion</em></li>
<li>Emily Rodda, <em>The Shadowlands</em></li>
<li>Emily Rodda, <em>Dragon’s Nest</em></li>
<li>Emily Rodda, <em>Shadowgate</em></li>
<li>Emily Rodda, <em>Isle of the Dead</em></li>
<li>Emily Rodda, <em>The Sister of the South</em></li>
<li>JK Rowling, <em>Harry Potter and the Philospher’s Stone</em>*</li>
<li>JK Rowling, <em>Harry Potter and the Chamber of Secrets</em>*</li>
<li>JK Rowling, <em>Harry Potter and the Prisoner of Azkaban</em>*</li>
<li>JK Rowling, <em>Harry Potter and the Goblet of Fire</em>*</li>
<li>Tui T. Sutherland, <em>The Dragonet Prophecy</em></li>
<li>Tui T. Sutherland, <em>The Lost Heir</em></li>
<li>Tui T. Sutherland, <em>The Hidden Kingdom</em></li>
<li>Tui T. Sutherland, <em>The Dark Secret</em></li>
<li>Tui T. Sutherland, <em>The Brightest Night</em></li>
<li>Tui T. Sutherland, <em>Moon Rising</em></li>
<li>Tui T. Sutherland, <em>Winter Turning</em></li>
<li>Tui T. Sutherland, <em>Escaping Peril</em></li>
<li>Tui T. Sutherland, <em>Talons of Power</em></li>
<li>Tui T. Sutherland, <em>Darkness of Dragons</em></li>
<li>Tui T. Sutherland, <em>Darkstalker</em></li>
<li>Tui T. Sutherland, <em>Winglets Quartet</em></li>
<li>P.L. Travers, <em>Mary Poppins</em></li>
<li>JRR Tolkien, <em>The Hobbit</em>*</li>
</ul>
<p>Previous best book lists: <a href="../top-10-books-in-2010/">2010</a>, <a href="../best-books-i-read-in-2011/">2011</a>, <a href="../the-best-books-i-read-in-2012/">2012</a>, <a href="../best-books-i-read-in-2013/">2013</a>, <a href="../best-books-i-read-in-2014/">2014</a>, <a href="../best-books-i-read-in-2015/">2015</a>, <a href="../best-books-i-read-in-2016/">2016</a>, <a href="../best-books-i-read-in-2017/">2017</a>, <a href="../books-i-read-in-2018/">2018</a>, <a href="../best-books-i-read-in-2019/">2019</a>, <a href="../best-books-i-read-in-2020/">2020</a></p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.jasoncollins\.blog");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
function loadGiscusWhenReady() {
  // Function to get the theme based on body class
  const getTheme = () => {
    const baseTheme = document.getElementById('giscus-base-theme').value;
    const altTheme = document.getElementById('giscus-alt-theme').value;
    return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
  };
  // Create the Giscus script and add it to the desired location
  const loadGiscus = () => {
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "jasonacollins/jasoncollinsblog";
    script.dataset.repoId = "R_kgDOIbjYgQ";
    script.dataset.category = "Announcements";
    script.dataset.categoryId = "DIC_kwDOIbjYgc4CSiuB";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "0";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "bottom";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  };
  // MutationObserver to detect when the 'quarto-light' or 'quarto-dark' class is added to the body
  const observer = new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type === "attributes" && mutation.attributeName === "class") {
        if (document.body.classList.contains('quarto-light') || document.body.classList.contains('quarto-dark')) {
          loadGiscus();
          observer.disconnect(); // Stop observing once Giscus is loaded
          break;
        }
      }
    }
  });
  // Start observing the body for class attribute changes
  observer.observe(document.body, {
    attributes: true,
    attributeFilter: ["class"],
  });
}
loadGiscusWhenReady();
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://creativecommons.org/licenses/by/4.0/">
<p>Copyright: CC-BY</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>
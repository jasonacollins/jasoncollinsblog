<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jason Collins">
<meta name="dcterms.date" content="2014-11-17">

<title>E.O. Wilson’s The Social Conquest of Earth – Jason Collins blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9be722aa83fbcc428616ae682c30a50a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C50MEPDMZ9"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C50MEPDMZ9', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="E.O. Wilson’s The Social Conquest of Earth – Jason Collins blog">
<meta property="og:description" content="Behavioural economics, data science and artificial intelligence.">
<meta property="og:image" content="https://www.jasoncollins.blog/posts/img/wilson.jpg">
<meta property="og:site_name" content="Jason Collins blog">
<meta name="twitter:title" content="E.O. Wilson’s The Social Conquest of Earth – Jason Collins blog">
<meta name="twitter:description" content="Behavioural economics, data science and artificial intelligence.">
<meta name="twitter:image" content="https://www.jasoncollins.blog/posts/img/wilson.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Jason Collins blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../subscribe.html"> 
<span class="menu-text">Subscribe</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">E.O. Wilson’s The Social Conquest of Earth</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jason Collins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 17, 2014</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>The re-eruption of the war of words between E.O. Wilson and Richard Dawkins has occurred&nbsp;just as I have come around to reading Wilson’s 2012 book <em>The Social Conquest of Earth</em>. In an interview on BBC2 (watch it at the bottom of this post), Wilson stated:</p>
<blockquote class="blockquote">
<p>There is no dispute between me and Richard Dawkins and there never has been, because he’s a journalist, and journalists are people that report what the scientists have found and the arguments I’ve had have actually been with scientists doing research.</p>
</blockquote>
<p>It is&nbsp;an interesting call to authority that Wilson himself challenged in his reply to Dawkins’s <a href="http://www.prospectmagazine.co.uk/science-and-technology/edward-wilson-social-conquest-earth-evolutionary-errors-origin-species">stinging review of the book in Prospect magazine</a>&nbsp;(Wilson’s reply is at the bottom of the Dawkins piece) - or even Wilson’s statement at the end of the book that:</p>
<blockquote class="blockquote">
<p>Science belongs to everybody. Its constituent parts can be&nbsp;challenged by anybody in the world who has sufficient information to do so.</p>
</blockquote>
<p>Regardless, the debate between Wilson and Dawkins is a continuation of&nbsp;the group selection&nbsp;debate that has been running&nbsp;since the 1960s, with Wilson now on the group selection side, and Dawkins on that of the selfish gene. But despite this framing of the debate as a confrontation between two apparently diametrically opposed&nbsp;views, The Social Conquest of Earth suggests that Wilson’s view is somewhat more complicated, and possibly confused.</p>
<section id="the-old-and-new-group-selection" class="level2">
<h2 class="anchored" data-anchor-id="the-old-and-new-group-selection">The old and new group selection</h2>
<p>As background, it is worth defining three concepts: group selection, a newer conception&nbsp;of group selection&nbsp;called multilevel selection, and inclusive fitness.</p>
<p>The older form of&nbsp;group selection&nbsp;is&nbsp;a process where the differential survival of groups leads to the evolution of&nbsp;traits that benefit the group. This type of group selection, pushed&nbsp;in the 1960s by&nbsp;V.C Wynne-Edwards in particular, might involve members of a group restraining reproduction during times of scarcity so that the group does not experience resource shortages.</p>
<p>This concept received many harsh critiques, most famously by <a href="http://en.wikipedia.org/wiki/Adaptation_and_Natural_Selection">George Williams</a> and in popular form by Dawkins in <a href="http://en.wikipedia.org/wiki/The_Selfish_Gene">The Selfish Gene</a>. The basic problem is that if someone cheats&nbsp;and does not&nbsp;restrain reproduction when others do, they will have more offspring&nbsp;and come to dominate the group. The altruistic trait will only emerge if groups with more altruists have a large enough advantage over other groups to compensate for their disadvantage within their groups. These conditions&nbsp;are&nbsp;generally considered&nbsp;to be&nbsp;met&nbsp;in limited circumstances, and most evolutionary biologists would say&nbsp;that the evolution of&nbsp;group adaptations in this way&nbsp;is a&nbsp;theoretical possibility, occurs&nbsp;in some circumstances, but is a practical rarity.</p>
<p>Group selection was somewhat reinvigorated in the late 1970s by David Sloan Wilson and friends under a reworking that is commonly called <a href="https://www.jasoncollins.blog/what-is-multilevel-selection/">multilevel selection</a>. The first&nbsp;distinguishing feature of multilevel selection&nbsp;is that the definition of&nbsp;“group” can include&nbsp;transitory groupings that regularly remix. You could consider two individuals&nbsp;who briefly trade to be&nbsp;a group. The second feature of multilevel selection&nbsp;is that selection is decomposed&nbsp;across multiple levels. The analysis would look at the fitness of the two trading individuals&nbsp;with respect to each other, which is the individual&nbsp;level selection, and of the fitness of their group relative to other groups.</p>
<p>Multilevel selection&nbsp;has received a largely&nbsp;muted response, with inclusive fitness the&nbsp;alternative framework preferred by&nbsp;Dawkins and friends&nbsp;- not to mention&nbsp;the dominant paradigm&nbsp;in evolutionary biology. Inclusive fitness combines&nbsp;the direct effects of a&nbsp;trait on an individual with&nbsp;the indirect effects of the trait on other individuals&nbsp;who possess&nbsp;that trait. Kin selection, a strategy of favouring relatives, maximises inclusive fitness.</p>
<p>Inclusive fitness is famously captured by Hamilton’s rule, which states that an altruistic trait will spread if <em>rb</em>&gt;<em>c</em>. <em>c</em> is the cost to the altruist of the trait, <em>b</em> the benefits to others, and&nbsp;<em>r</em> the relatedness between the altruist and beneficiaries. A trait to favour your brother will spread if the benefits to the brother, who is 0.5 related to you, are double the costs to you. Or as J.B.S. Haldane put it, he would give his life for two brothers or eight cousins.</p>
<p>While apparently opposing perspectives, inclusive fitness and multilevel selection&nbsp;are two sides of the same coin. If you can describe an evolutionary dynamic in terms of multilevel selection, you can also give an inclusive fitness story (many suggest the two approaches <a href="http://www.jstor.org/stable/2462497">are mathematically equivalent</a>, although this <a href="http://www.sciencedirect.com/science/article/pii/S0022519311003754">is debated</a>). They are simply different accounting methods, or languages. The intuitive explanation for the link is that higher levels of selection (the level of groups) can favour the spread of a trait because the members of that group have a degree of relatedness.</p>
</section>
<section id="wilsons-critique-of-kin-selection" class="level2">
<h2 class="anchored" data-anchor-id="wilsons-critique-of-kin-selection">Wilson’s critique of kin selection</h2>
<p>Wilson’s core argument through&nbsp;The Social Conquest of Earth is that the concept of inclusive fitness has been discredited. This claim stems from <a href="http://www.nature.com/nature/journal/v466/n7310/full/nature09205.html">the infamous 2010 Nature paper</a>&nbsp;by Martin Nowak, Corina&nbsp;Tarnita&nbsp;and Wilson on eusociality.</p>
<p>An E.O. Wilson drawn ant on the title page to my book:</p>
<p><a href="img/wilson.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="img/wilson.jpg" class="img-fluid"></a></p>
<p>Eusociality&nbsp;involves a division of reproductive labour, such as that which occurs in the bees, ants and wasps. Eusociality&nbsp;and kin selection are closely linked as the higher relatedness between sisters in the bees, ants and wasps has been used&nbsp;to explain the willingness of most females&nbsp;to forgo their reproductive success for one of their sisters, the queen.</p>
<p>Nowak, Tarnita&nbsp;and Wilson’s argument was&nbsp;that the evolution of&nbsp;eusociality&nbsp;could be explained through simple individual&nbsp;selection&nbsp;and did not require&nbsp;the framework of inclusive fitness. They presented a model in which eusociality evolved without any reference to relatedness.</p>
<p>The model itself was interesting, but it&nbsp;was sandwiched&nbsp;between&nbsp;a not particularly well thought-out or supported claim that “the production of&nbsp;inclusive fitness theory must be&nbsp;considered meagre” and that it “does not provide additional insight or information” to standard natural selection theory.&nbsp;I will let the many responses to the paper speak for themselves, including <a href="http://www.nature.com/nature/journal/v471/n7339/full/nature09831.html?WT.ec_id=NATURE-20110324">the main response</a> (with the 130 odd signatures - <a href="http://www.zoo.ox.ac.uk/group/gardner/publications/Abbot_et_al_2011.pdf">ungated version here</a>), which contains a table&nbsp;indicating the contributions of inclusive fitness. But if I were to single one&nbsp;paper out, it is this <a href="http://onlinelibrary.wiley.com/doi/10.1111/j.1420-9101.2011.02236.x/abstract">one by Garnder, West and Wild</a>, which addresses many of the mathematical arguments. Its main point, in short, is that Nowak, Tarnita&nbsp;and Wilson fail to distinguish between general kin selection theory and the kin selection methodology&nbsp;used to address specific problems. Their criticisms do not apply to the general theory.</p>
<p>Coming back to Wilson’s book, however, Wilson seems to take an even stronger stance than in the paper. For example, he states that:</p>
<blockquote class="blockquote">
<p>Martin Nowak, Corina Tarnita, and I demonstrated that inclusive-fitness theory, often called kin selection theory, is both mathematically and biologically incorrect.</p>
</blockquote>
<p>Through the book, Wilson’s characterisation&nbsp;of the paper’s reception has to be&nbsp;described&nbsp;as either deceptive or oblivious. Gems such as “The beautiful theory [inclusive fitness] never worked anyway, and now it has collapsed” contrasts with what even a&nbsp;cursory glance at the responses suggest. Nowak, Tarnita&nbsp;and Wilson’s critique has not generally been accepted, although reading the book gives no impression of the slightest opposition to Wilson’s position. The&nbsp;interview that triggered this latest spat suggests Wilson is still singing a&nbsp;deceptive tune. He states:</p>
<blockquote class="blockquote">
<p>I have abandoned it [the notion of&nbsp;the selfish gene] and I think most serious scientists working on it have abandoned it. Some defenders may be out there, but they have been relatively or almost totally silenced since our major paper came out.</p>
</blockquote>
<p>Given the paper, it is no surprise that Wilson argues throughout The Social Conquest of Earth that individual&nbsp;level and group selection&nbsp;is all that is required&nbsp;to explain the evolution of&nbsp;eusociality&nbsp;in insects. Wilson argues that, after the&nbsp;emergence of eusociality&nbsp;in a single colony through individual&nbsp;level selection, “between-colony selection” leads to the wider spread of the eusocial trait. Its selection at the individual and group&nbsp;levels without a multi-level selection framework. As Wilson states:</p>
<blockquote class="blockquote">
<p>But multilevel selection, in which colonial evolution is regarded&nbsp;as the interests of the individual worker pitted against the interests of its colony, may no longer be a useful concept on which to build models of genetic evolution is social insects.</p>
</blockquote>
<p>I have no idea why the preferred model&nbsp;isn’t simply a multilevel selection framework with alternative assumptions, and&nbsp;the confusion only increases from here.</p>
</section>
<section id="eusociality-in-humans" class="level2">
<h2 class="anchored" data-anchor-id="eusociality-in-humans">Eusociality in humans</h2>
<p>Where things get truly confusing is Wilson’s consideration of humans. Try as I could, I could not conceive of a sympathetic reading that would allow Wilson’s position to be seen as coherent.</p>
<p>First, his branding of humans as eusocial is a stretch under any definition, although he is not alone in attempting that.</p>
<p>But more confusingly, his argument that eusociality&nbsp;arose in humans due to multilevel selection&nbsp;is hard to understand because I have no clear idea of what he actually means.&nbsp;As a start, its not&nbsp;multilevel selection&nbsp;in the traditional sense, as Wilson has rejected the other side of the multilevel selection&nbsp;coin, inclusive fitness.&nbsp;Initially, I put it down to his error, but&nbsp;when I hit the last chapter, I realised he was using the term “multilevel selection” to mean something different.&nbsp;When Wilson speaks of multilevel selection, he is generally referring&nbsp;to individual level and group selection occurring in tandem, the “groups” being as we would traditionally define them. But then why isn’t his dynamic in eusocial insects multilevel selection under his definition?</p>
<p>Part of my confusion (and initial assumption) also stemmed from&nbsp;the contrast between Wilson’s past&nbsp;statements&nbsp;and&nbsp;what he wrote&nbsp;in the book. Compare these two paragraphs – the first from <a href="http://www.jstor.org/stable/10.1086/522809">a 2007 paper</a>&nbsp;co-authored with David Sloan Wilson, and the second from the last chapter of the book.</p>
<blockquote class="blockquote">
<p>The theories that were originally regarded as alternatives, such that one might be right and another wrong, are now seen as equivalent&nbsp;in the sense that they all correctly predict what evolves in the total population. They differ, however, in how they partition selection&nbsp;into component vectors along the way.</p>
<p>Theorists of inclusive fitness themselves have argued that kin selection can be translated into group selection, even though that belief has now been disproven mathematically.</p>
</blockquote>
<p>Based on this, it&nbsp;seems that E.O. Wilson is&nbsp;no longer on the same page as the number one champion of multi-level selection, David Sloan Wilson. It is particularly strange in that the two Wilsons characterise what multilevel selection means for humans in almost the same way. As E.O. Wilson writes, and I expect David Sloan Wilson would agree:</p>
<blockquote class="blockquote">
<p>Selection at the individual level tends to create competitiveness and selfish behaviour among group members - in status, mating, and the securing of resources. In opposition, selection between groups tends to create selfless behavior, expressed in greater generosity and altruism, which in turn promote stronger cohesion and strength of the group as a whole.</p>
</blockquote>
<p>E.O. Wilson’s varying use of these terms points to one of the problems group selection has in popular discourse. The term group selection has been used&nbsp;so inconsistently and used to refer to so many different dynamics, it is often hard to know what someone means when they refer to it. <a href="http://www.ehbonline.org/article/S1090-5138(10)00090-5/abstract">This article</a>&nbsp;(<a href="http://www.zoo.ox.ac.uk/group/west/pdf/WestElMoudenGardner_11.pdf">ungated&nbsp;pdf</a>) points to four different uses of the term “group selection”, although I have seen some suggestions that there are six different uses in the literature.&nbsp;When people like Wilson present their arguments in such a confusing manner, it is no surprise that others with less expertise are similarly confused.&nbsp;Look at&nbsp;<a href="https://www.jasoncollins.blog/haidts-group-selection/">Jonathan Haidt’s confusion of old group and multilevel selection</a>&nbsp;as a prime example.</p>
</section>
<section id="the-other-bits" class="level2">
<h2 class="anchored" data-anchor-id="the-other-bits">The other&nbsp;bits</h2>
<p>Beyond Wilson’s take on&nbsp;group selection, there are some interesting parts to the book.</p>
<p>One is Wilson’s&nbsp;argument that many examples of kin selection can be&nbsp;explained as pure self interest. For example, he describes how some bird and mammal offspring remain&nbsp;at&nbsp;their parents’ nest. This has been interpreted&nbsp;as an example of kin selection – it helps the bird or mammal’s parents and siblings. However, Wilson suggests direct self interest&nbsp;is at play. In cases of resource or territory scarcity, they remain&nbsp;with the parents&nbsp;to inherit the parents’ nest when the parents fall off the&nbsp;perch. Wilson&nbsp;provides several examples of this type, suggesting that the focus on kin selection clouds the assessment of what is actually occurring.</p>
<p>Funnily enough, these arguments mirror an argument I often make about apparently altruistic acts sought to be&nbsp;explained by multilevel or group selection.&nbsp;Many apparently altruistic acts are self interested, such as the trade that characterises our economies.&nbsp;If you classed&nbsp;two people trading with each other&nbsp;as a group, as you might in a <a href="https://www.jasoncollins.blog/what-is-multilevel-selection/">multilevel selection framework</a>, you could class the person who gained the least surplus from the trade as an “altruist”. But the simplest explanation is that they seek to gain from trade.</p>
<p>The final sections of the book seek to explain “who we are”. I&nbsp;can only say that there are better places&nbsp;to read about the evolutionary origins of religion, art or language. While the last chapter of <em>Sociobiology</em>&nbsp;was revolutionary in its application of evolutionary theory to humans, the short snapshots Wilson provides in <em>The Social Conquest of Earth</em> do not do justice to the work that has occurred in the last 30 years. But that large body of work is, of course, one of Wilson’s great legacies. As Dawkins noted, despite <em>The Social Conquest of Earth</em>, Wilson’s place in history is assured.</p>
<p></p><div id="youtube-frame" style="position: relative; padding-bottom: 56.25%; /* 16:9 */ height: 0;"><iframe width="100%" height="" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="https://www.youtube.com/embed/oqb-zRCFLbU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.jasoncollins\.blog");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "jasonacollins/jasoncollinsblog";
    script.dataset.repoId = "R_kgDOIbjYgQ";
    script.dataset.category = "Announcements";
    script.dataset.categoryId = "DIC_kwDOIbjYgc4CSiuB";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "0";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "bottom";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://creativecommons.org/licenses/by/4.0/">
<p>Copyright: CC-BY</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>